<!DOCTYPE html>
<html>
<head>
	<title>Exercise 1</title>
	<script src="js/modernizr-custom.js"></script>

	<style>
		li{
			list-style: none;
		}
		section{
			width: 900px;
			height: 250px;
			margin: 0px auto;
		}
		.column{
			width: 400px;
			float: left;
		}
		#section-1{
			border-bottom: 1px solid #000;
		}
		#section-3{
			height: 100%;
		}

	</style>
</head>
<body>
	<header><h1>Front-End Exercise</h1></header>
	<section id="section-1">
		<div class="column">
			<h2>Compatibilidad Modernizr</h2>
			<ul id="column1"></ul>
		</div>
		<div class="column">
			<h2>Compatibilidad HTML5</h2>
			<ul id="column2"></ul>
		</div>
	</section>
	<section id="section-2">
		<h2>Test with audio file: Armin van Buuren & Jean-Michael Jarre - Stardust</h2>
		<audio controls>
			 <source src="files/Stardust.mp3">
		</audio>
	</section>
	<section id="section-3">
		
	</section>
	<footer></footer>
	<script>
		var mock_input = ['svg', 'audio', 'flash', 'batteryapi', 'contenteditable', 'proximity', 'geolocation'];
		id1 = "column1";
		id2 = "column2";

		check_modernizr(mock_input, id1);
		check_html5(mock_input, id2);

		if(navigator.geolocation)
			console.log('ok');	

		function check_modernizr(v, id)
		{
			var output = "";
			for(i = 0; i < v.length; i++)
			{

				if(Modernizr[v[i]])
				{
					output += '<li id="element'+i+'">'+v[i]+' <input class="check" type="checkbox" checked="checked" disabled="true"></li>';
				}
				else
				{
					output += '<li id="element'+i+'">'+v[i]+' <input class="check" type="checkbox" disabled="true"></li>';
				}
			}
			document.getElementById(id).innerHTML = output;
		}

		function check_html5(v, id)
		{
			var output = "";
			for(i = 0; i < v.length; i++)
			{
				if(html5_element_supported(v[i]))
				{
					output += '<li id="element'+i+'">'+v[i]+' <input class="check" type="checkbox" checked="checked" disabled="true"></li>';	
				}
				else
				{
					output += '<li id="element'+i+'">'+v[i]+' <input class="check" type="checkbox" disabled="true"></li>';
				}
			}
			document.getElementById(id).innerHTML = output;
		}

		//Returns true if HTML5 element is supported in browser. Otherwise, return false
		function html5_element_supported(tag)
		{	
			if(!navigator[tag])
			{
				var element = document.createElement(tag);
		    	return Object.prototype.toString.call(element) !== '[object HTMLUnknownElement]';
			}
			else
			{
				return true;
			}
		}
		initMap();

		function initMap() {
  var map = new google.maps.Map(document.getElementById('section-3'), {
    center: {lat: -34.397, lng: 150.644},
    zoom: 6
  });
  var infoWindow = new google.maps.InfoWindow({map: map});

  // Try HTML5 geolocation.
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };

      infoWindow.setPosition(pos);
      infoWindow.setContent('Location found.');
      map.setCenter(pos);
    }, function() {
      handleLocationError(true, infoWindow, map.getCenter());
    });
  } else {
    // Browser doesn't support Geolocation
    handleLocationError(false, infoWindow, map.getCenter());
  }
}

function handleLocationError(browserHasGeolocation, infoWindow, pos) {
  infoWindow.setPosition(pos);
  infoWindow.setContent(browserHasGeolocation ?
                        'Error: The Geolocation service failed.' :
                        'Error: Your browser doesn\'t support geolocation.');
}
	</script>
</body>
</html>